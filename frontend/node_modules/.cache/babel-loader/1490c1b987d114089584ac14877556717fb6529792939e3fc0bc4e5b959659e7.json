{"ast":null,"code":"// src/features/posts/subscriptionSlice.ts\n\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  loading: false,\n  error: null\n};\nexport const subscribeToAuthor = createAsyncThunk('posts/subscribeToAuthor', async ({\n  postId\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/api/platform/posts/${postId}/author-profile/subscribe/`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue('Subscription failed');\n  }\n});\nexport const unsubscribeFromAuthor = createAsyncThunk('posts/unsubscribeFromAuthor', async ({\n  postId\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/api/platform/posts/${postId}/author-profile/unsubscribe/`);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue('Unsubscription failed');\n  }\n});\nconst subscriptionSlice = createSlice({\n  name: 'subscription',\n  initialState,\n  reducers: {\n    clearSubscriptionState(state) {\n      state.loading = false;\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(subscribeToAuthor.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(subscribeToAuthor.fulfilled, state => {\n      state.loading = false;\n    }).addCase(subscribeToAuthor.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }).addCase(unsubscribeFromAuthor.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(unsubscribeFromAuthor.fulfilled, state => {\n      state.loading = false;\n    }).addCase(unsubscribeFromAuthor.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearSubscriptionState\n} = subscriptionSlice.actions;\nexport default subscriptionSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","loading","error","subscribeToAuthor","postId","rejectWithValue","response","post","data","unsubscribeFromAuthor","subscriptionSlice","name","reducers","clearSubscriptionState","state","extraReducers","builder","addCase","pending","fulfilled","rejected","action","payload","actions","reducer"],"sources":["D:/pycharm_projects/wander-wave-project/frontend/src/features/subscriptionSlice.ts"],"sourcesContent":["// src/features/posts/subscriptionSlice.ts\r\n\r\nimport { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\ninterface SubscriptionState {\r\n  loading: boolean;\r\n  error: string | null;\r\n}\r\n\r\nconst initialState: SubscriptionState = {\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nexport const subscribeToAuthor = createAsyncThunk(\r\n  'posts/subscribeToAuthor',\r\n  async ({ postId }: { postId: number }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/api/platform/posts/${postId}/author-profile/subscribe/`,\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue('Subscription failed');\r\n    }\r\n  },\r\n);\r\n\r\nexport const unsubscribeFromAuthor = createAsyncThunk(\r\n  'posts/unsubscribeFromAuthor',\r\n  async ({ postId }: { postId: number }, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `/api/platform/posts/${postId}/author-profile/unsubscribe/`,\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue('Unsubscription failed');\r\n    }\r\n  },\r\n);\r\n\r\nconst subscriptionSlice = createSlice({\r\n  name: 'subscription',\r\n  initialState,\r\n  reducers: {\r\n    clearSubscriptionState(state) {\r\n      state.loading = false;\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: builder => {\r\n    builder\r\n      .addCase(subscribeToAuthor.pending, state => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(subscribeToAuthor.fulfilled, state => {\r\n        state.loading = false;\r\n      })\r\n      .addCase(\r\n        subscribeToAuthor.rejected,\r\n        (state, action: PayloadAction<any>) => {\r\n          state.loading = false;\r\n          state.error = action.payload;\r\n        },\r\n      )\r\n      .addCase(unsubscribeFromAuthor.pending, state => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(unsubscribeFromAuthor.fulfilled, state => {\r\n        state.loading = false;\r\n      })\r\n      .addCase(\r\n        unsubscribeFromAuthor.rejected,\r\n        (state, action: PayloadAction<any>) => {\r\n          state.loading = false;\r\n          state.error = action.payload;\r\n        },\r\n      );\r\n  },\r\n});\r\n\r\nexport const { clearSubscriptionState } = subscriptionSlice.actions;\r\nexport default subscriptionSlice.reducer;\r\n"],"mappings":"AAAA;;AAEA,SAASA,WAAW,EAAEC,gBAAgB,QAAuB,kBAAkB;AAC/E,OAAOC,KAAK,MAAM,OAAO;AAOzB,MAAMC,YAA+B,GAAG;EACtCC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAGL,gBAAgB,CAC/C,yBAAyB,EACzB,OAAO;EAAEM;AAA2B,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC7D,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAC/B,uBAAuBH,MAAM,4BAC/B,CAAC;IACD,OAAOE,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAON,KAAK,EAAE;IACd,OAAOG,eAAe,CAAC,qBAAqB,CAAC;EAC/C;AACF,CACF,CAAC;AAED,OAAO,MAAMI,qBAAqB,GAAGX,gBAAgB,CACnD,6BAA6B,EAC7B,OAAO;EAAEM;AAA2B,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC7D,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAC/B,uBAAuBH,MAAM,8BAC/B,CAAC;IACD,OAAOE,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAON,KAAK,EAAE;IACd,OAAOG,eAAe,CAAC,uBAAuB,CAAC;EACjD;AACF,CACF,CAAC;AAED,MAAMK,iBAAiB,GAAGb,WAAW,CAAC;EACpCc,IAAI,EAAE,cAAc;EACpBX,YAAY;EACZY,QAAQ,EAAE;IACRC,sBAAsBA,CAACC,KAAK,EAAE;MAC5BA,KAAK,CAACb,OAAO,GAAG,KAAK;MACrBa,KAAK,CAACZ,KAAK,GAAG,IAAI;IACpB;EACF,CAAC;EACDa,aAAa,EAAEC,OAAO,IAAI;IACxBA,OAAO,CACJC,OAAO,CAACd,iBAAiB,CAACe,OAAO,EAAEJ,KAAK,IAAI;MAC3CA,KAAK,CAACb,OAAO,GAAG,IAAI;MACpBa,KAAK,CAACZ,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDe,OAAO,CAACd,iBAAiB,CAACgB,SAAS,EAAEL,KAAK,IAAI;MAC7CA,KAAK,CAACb,OAAO,GAAG,KAAK;IACvB,CAAC,CAAC,CACDgB,OAAO,CACNd,iBAAiB,CAACiB,QAAQ,EAC1B,CAACN,KAAK,EAAEO,MAA0B,KAAK;MACrCP,KAAK,CAACb,OAAO,GAAG,KAAK;MACrBa,KAAK,CAACZ,KAAK,GAAGmB,MAAM,CAACC,OAAO;IAC9B,CACF,CAAC,CACAL,OAAO,CAACR,qBAAqB,CAACS,OAAO,EAAEJ,KAAK,IAAI;MAC/CA,KAAK,CAACb,OAAO,GAAG,IAAI;MACpBa,KAAK,CAACZ,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDe,OAAO,CAACR,qBAAqB,CAACU,SAAS,EAAEL,KAAK,IAAI;MACjDA,KAAK,CAACb,OAAO,GAAG,KAAK;IACvB,CAAC,CAAC,CACDgB,OAAO,CACNR,qBAAqB,CAACW,QAAQ,EAC9B,CAACN,KAAK,EAAEO,MAA0B,KAAK;MACrCP,KAAK,CAACb,OAAO,GAAG,KAAK;MACrBa,KAAK,CAACZ,KAAK,GAAGmB,MAAM,CAACC,OAAO;IAC9B,CACF,CAAC;EACL;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAET;AAAuB,CAAC,GAAGH,iBAAiB,CAACa,OAAO;AACnE,eAAeb,iBAAiB,CAACc,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}